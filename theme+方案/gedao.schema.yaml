# Rime schema
# encoding: utf-8

schema:
  schema_id: gedao
  name: æ ¼é“17
  version: "0.2"
  author:
    - Roy <roy.chen.cc@outlook.com>
  description: |
    æ ¼é“17æ–¹æ¡ˆ
    ä»¥ğŸ€ï¸å››å¶è‰ç®€ä½“æ‹¼éŸ³ä¸ºåŸºç¡€æ‰€é…ç½®çš„ä¸€æ¬¾é€‚åˆåœ¨æ‰‹æœº æ ¼é“17å¸ƒå±€ ä¸Šçš„è¾“å…¥æ–¹æ¡ˆã€‚
  dependencies:
    - emoji

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­, è‹± ]
  - name: full_shape
    states: [ åŠ, å…¨ ]
  - name: simplification
    states: [ ç®€, ç¹ ]
    reset: 0
  - name: ascii_punct
    states: [ ã€‚ï¼Œ, ï¼ï¼Œ ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller              # â€» æ‹¼å†™å¤„ç†å™¨ï¼Œæ¥å—å­—ç¬¦æŒ‰é”®ï¼Œç¼–è¾‘è¾“å…¥ç 
    - punctuator           # â€» å¥è¯»å¤„ç†å™¨ï¼Œå°†å•ä¸ªå­—ç¬¦æŒ‰é”®ç›´æ¥æ˜ å°„ä¸ºæ–‡å­—ç¬¦å·
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator@custom_phrase
    - reverse_lookup_translator
    - script_translator
  filters:
    - simplifier
    - uniquifier

speller:
  alphabet: zyxwvutsrqponmlkjihgfedcba123456789   # å®šä¹‰æœ¬æ–¹æ¡ˆè¾“å…¥é”®
  delimiter: " '"
  algebra:                                          # æ‹¼å¯«é‹ç®—è¦å‰‡ï¼Œç”±ä¹‹ç®—å‡ºçš„æ‹¼å¯«åŒ¯å…¥prismä¸­
    # - "xlit|12345|+_*^0|"
    - erase/^xx$/

    - abbrev/^([a-z]).+$/$1/ 
    - abbrev/^([zcs]h).+$/$1/ 

    - derive/^([jqxy])u$/$1v/    # å¤„ç† v å’Œ u
    - derive/ong$/on/

    # ä»¥ä¸‹å¯¹åŒæ‹¼æ–¹æ¡ˆ ï¼Œæ— ç”¨         
    # - derive/^([nl])ve$/$1ue/  
    # - derive/un$/uen/
    # - derive/ui$/uei/
    # - derive/iu$/iou/
    # - derive/([aeiou])ng$/$1gn/
    # - derive/([dtngkhrzcs])o(u|ng)$/$1o/
    # - derive/ao$/oa/
    # - derive/([iu])a(o|ng?)$/a$1$2/
    # - derive/[+_*^0]//
    # - derive/([+_*^0])$//
    # - derive/^(.*)$/\U$1/

    - xform/^zh/1/            # æ›¿æ¢å£°æ¯é”®
    - xform/^sh/2/
    - xform/^ch/3/
    - xform/^z|^f/4/
    - xform/^s|^w/5/
    - xform/^m|^c/6/
    - xform/^h|^n/7/
    - xform/^t|^r/8/
    - xform/^p|^k/9/
    # æ‰‹å†™ å•éŸµæ¯çš„
    - xform/^en$/q1/
    # - xform/^eng$/q2/
    - xform/^a$/q3/
    - xform/^ang$|^er$/q4/
    - xform/^an$/q5/
    - xform/^o$/q6/
    - xform/^ai$/qL/
    - xform/^e$/q7/
    - xform/^ei$/q9/
    - xform/^ao$/qb/
    - xform/iao$|ou$/X/
    - xform/ao$|iong$/B/             # ao åœ¨iaoä¹‹å
    - xform/uo$|ing/Y/
    - xform/uai$|un$|ei$/9/     # uai åœ¨ ai å‰é¢
    - xform/ui$|in$/G/          
    - xform/uang$|ian$/Q/       # ian åœ¨ an å‰é¢
    - xform/uan$|v$|o$/6/       # uan åœ¨ an å‰é¢  oåœ¨[\w]o ä¹‹å‰
    - xform/en$|iang$/1/        # å°æ‡‰å…©ç¨®éŸ»æ¯çš„ï¼›éŸ³ç¯€erç¾åœ¨è®Šçˆ²ORäº†
    - xform/eng$|ie$/2/
    - xform/ang$|ua$/4/     # [iu]ang åœ¨ ang å‰é¢
    - xform/an$/5/              # [iu]an åœ¨ an å‰é¢
    - xform/a$|ia$/3/
    - xform/iu$|ong$/8/
    - xform/ai$|ue$/L/
    - xform/e$/7/               # e è¦åœ¨æ‰€æœ‰çš„ [\w]e åé¢
    - xform/u$/D/
    - xform/i$/J/
    # æœ€å¾ŒæŠŠé›™æ‹¼ç¢¼å…¨éƒ¨æ”¹å†™
    - xlit/QWERTYOPASDFGHJKLZXCVBNM/qwertyopasdfghjklzxcvbnm/
    # xform --æ”¹å¯«ã€”ä¸ä¿ç•™åŸå½¢ã€•
    # derive --è¡ç”Ÿã€”ä¿ç•™åŸå½¢ã€•
    # abbrev --ç°¡æ‹¼ã€”å‡ºå­—å„ªå…ˆç´šè¼ƒä¸Šå…©çµ„æ›´ä½ã€•
    # fuzz --ç•§æ‹¼ã€”æ­¤ç¨®ç°¡æ‹¼åƒ…çµ„è©ï¼Œä¸å‡ºå–®å­—ã€•
    # xlit --è®Šæ›ã€”é©åˆå¤§é‡ä¸€å°ä¸€è®Šæ›ã€•
    # erase --åˆªé™¤

translator:
  dictionary: clover    # èˆ‡ã€å››å¶è‰ã€‘å…±ç”¨è©å…¸
  prism: gedao
  spelling_hints: 16 # ï½å­—ä»¥å…§å€™é¸æ¨™è¨»å®Œæ•´å¸¶èª¿æ‹¼éŸ³
  enable_sentence: true               
  enable_user_dict: true               
  enable_encoder: true                 
  encode_commit_history: true          
  max_phrase_length: 10     
  user_dict: user                                                      
  db_class: tabledb                # è®¾å®šç”¨æˆ·è¯å…¸ç±»å‹ï¼Œå¯è®¾ tabledb(æ–‡æœ¬) æˆ–è€… userdb (äºŒè¿›åˆ¶)        
  disable_user_dict_for_patterns:       
    - "^z.*$"
  preedit_format:                  # ä¸Šå±ç  è‡ªå®šä¹‰
    - xform/([nl])v/$1Ã¼/
    - xform/([nl])ue/$1Ã¼e/
    - xform/([jqxy])v/$1u/
    # - xform/eh/Ãª/

    - xform/q7$/e/
    - xform/^q1$/en/
    - xform/^q2$/eng/
    - xform/^q3$/a/
    - xform/^q4$/ang/
    - xform/^q4$/er/
    - xform/^q5$/an/
    - xform/^q6$/o/
    - xform/^ql$/ai/
    - xform/^q9$/ei/
    - xform/^qb$/ao/
    # åŒæ‹¼ç¬¬äºŒç  è½¬æ¢éŸµæ¯
    - xform/([6ld7j89qbx])x/$1iao/ # æå‰è½¬æ¢åŒæ‹¼ç iï¼Œå› ä¸ºiaoä¸­å­˜åœ¨i;ä¹Ÿå¯ä»¥é€šè¿‡ åŒæ‹¼ç  å˜æˆå¤§å†™çš„æ–¹å¼ é¿å…é”™è¯¯
    - xform/([l7jqbx])1/$1iang/  # å¯¹åº”å¤šç§éŸµæ¯çš„ åŒæ‹¼ç ï¼ŒæŒ‰æ­é…çš„å£°æ¯çš„æ–¹å¼åšåŒºåˆ†ï¼Œå¯¹äºç§»åŠ¨ç«¯åˆ™å…¨éƒ¨å¦‚æ­¤
    - xform/([123456ldn89gb])1/$1en/           
    - xform/([123456ld789gb])2/$1eng/
    - xform/([6ld7j89qbx])2/$1ie/
    - xform/([123456ldy789gb])3/$1a/
    - xform/([jqx])3/$1ia/
    - xform/([123456ldy789gb])4/$1ang/
    - xform/([12379g])4/$1ua/
    - xform/([123456ldy789gb])5/$1an/
    - xform/([123456ldy7j89qgb])6/$1uan/
    - xform/([7ljqxy])6/$1Ã¼/ 
    - xform/([456y9b])6/$1o/
    - xform/([y7jqx])l/$1ue/
    - xform/([123456ld789gb])l/$1ai/
    - xform/([123456ldy7j89qgbx])d/$1u/
    - xform/([123456ld789g])y/$1uo/
    - xform/([6ldy7j89qbx])y/$1ing/
    - xform/([123456ldy789g])7/$1e/
    - xform/(\w)j/$1i/
    - xform/([6ld7jqx])8/$1iu/   
    - xform/([123456ldy789g])8/$1ong/
    - xform/([12379g])9/$1uai/
    - xform/([123456ldy7j89qgx])9/$1un/
    - xform/([123456ldy7j89qgx])9/$1ei/
    - xform/([123456d79g])q/$1uang/
    - xform/([6ld7j89qbx])q/$1ian/
    - xform/([123456d789g])g/$1ui/
    - xform/([6ldy7j9qbx])g/$1in/
    - xform/([jqx])b/$1iong/
    - xform/([1234567dy789gb])b/$1ao/
    - xform/([123456ldy789g])x/$1ou/
    - "xform/(^|[ '])1/$1zh/"  # å¾©åŸè²æ¯ï¼ŒéŸ³ç¯€é–‹å§‹è™•çš„é›™æ‹¼å­—æ¯aæ”¹å¯«çˆ²zhï¼›å…¶ä»–ä½ç½®çš„æ‰çœŸæ­£æ˜¯a
    - "xform/(^|[ '])2/$1sh/"
    - "xform/(^|[ '])3/$1ch/"
    - "xform/(^|[ '])4/$1z/"
    - "xform/(^|[ '])4/$1f/"
    - "xform/(^|[ '])5/$1s/"
    - "xform/(^|[ '])5/$1w/"
    - "xform/(^|[ '])6/$1c/"
    - "xform/(^|[ '])6/$1m/"
    - "xform/(^|[ '])7/$1n/"
    - "xform/(^|[ '])7/$1h/"
    - "xform/(^|[ '])8/$1t/"
    - "xform/(^|[ '])8/$1r/"
    - "xform/(^|[ '])9/$1p/"
    - "xform/(^|[ '])9/$1k/"
    - xform/0(\w)/$1/          # å¥½äº†ï¼Œç¾åœ¨å¯ä»¥æŠŠé›¶è²æ¯æ‹¿æ‰å•¦
    # - xform/([q7])6/$1Ã¼/       # é€™æ¨£çº”æ˜¯æ¼¢èªæ‹¼éŸ³ :-)
    # - xform/([jqxy])v/$1u/


custom_phrase:
  dictionary: ""
  user_dict: custom_phrase
  db_class: stabledb
  enable_completion: false
  enable_sentence: false
  initial_quality: 1

reverse_lookup:
  dictionary: stroke
  enable_completion: true
  prefix: "`"
  suffix: "'"
  tips: ã€”ç¬”ç”»ã€•
  preedit_format:
    - "xlit|v|Ã¼|"
    - xform/iÃ¼/iv/
    - xform/uÃ¼/uv/

punctuator:
  import_preset: symbols

key_binder:
  import_preset: default

recognizer:
  import_preset: default
  patterns:
    punct: "^/([0-9]0?|[a-z]+)$"
    reverse_lookup: "`[a-z]*'?$"